<div class="dashboard-container">
  <div class="stats-container">
    <mat-card>
      <mat-card-content>
        <div>Total de Llamadas</div>
        <div class="stat-value">{{ totalCalls | number }}</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div>Tiempo Promedio de Atención</div>
        <div class="stat-value">{{ averageHandlingTime }}</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div>Satisfacción del Cliente</div>
        <div class="stat-value">{{ customerSatisfactionPercentage }}%</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div>Tickets Abiertos</div>
        <div class="stat-value">{{ openTickets | number }}</div>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="charts-container">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title class="chart-title"
          >Volumen de Llamadas por Hora</mat-card-title
        >
      </mat-card-header>
      <mat-card-content>
        <p-chart
          type="bar"
          [data]="callVolumeData"
          [options]="barOptions"
        ></p-chart>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title class="chart-title"
          >Tendencia de Satisfacción del Cliente</mat-card-title
        >
      </mat-card-header>
      <mat-card-content>
        <p-chart
          type="pie"
          [data]="customerSatisfactionData"
          [options]="pieOptions"
        ></p-chart>
      </mat-card-content>
    </mat-card>
  </div>

  <mat-card>
    <mat-card-header>
      <mat-card-title class="chart-title"
        >Últimos Incidentes Gestionados</mat-card-title
      >
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="recentIncidents" class="mat-elevation-z8">
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>ID</th>
          <td mat-cell *matCellDef="let incident">{{ incident.id }}</td>
        </ng-container>

        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Descripción</th>
          <td mat-cell *matCellDef="let incident">
            {{ incident.description }}
          </td>
        </ng-container>

        <ng-container matColumnDef="state">
          <th mat-header-cell *matHeaderCellDef>Estado</th>
          <td mat-cell *matCellDef="let incident">{{ incident.state }}</td>
        </ng-container>

        <ng-container matColumnDef="channel">
          <th mat-header-cell *matHeaderCellDef>Canal</th>
          <td mat-cell *matCellDef="let incident">{{ incident.channel }}</td>
        </ng-container>

        <ng-container matColumnDef="creation_date">
          <th mat-header-cell *matHeaderCellDef>Fecha</th>
          <td mat-cell *matCellDef="let incident">
            {{ incident.creation_date | date : "short" }}
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="[
            'id',
            'description',
            'state',
            'channel',
            'creation_date'
          ]"
        ></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            columns: ['id', 'description', 'state', 'channel', 'creation_date']
          "
        ></tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>
